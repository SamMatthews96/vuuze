<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
  <title>Vite App</title>
</head>

<body>
  <div id="container">
    <canvas id="app"></canvas>
  </div>
</body>

<!-- <script type='module'>
  import Intreface from './main.js'
  const { Retool, Chart } = Intreface;
  let instance

  const model = {
    data: {
      Income: {
        //color: 'rgba(255, 99, 132, 0.2)',
        //tick: '${{value}}',
        dataset: { "June": 100, "July": 200, "August": 300.5, "September": 251.42 }
      },
      Outgoing: {
        //tick: 'GBP {{value}}',
        dataset: { "June": 32, "July": 32.4, "August": 30.5, "September": 821.43 }
      },
      Plan: {
        dataset: { "June": 332, "July": 312.4, "August": 330.5, "September": 321.43 }
      }
    },
    parameters: {
      //stacked: true,
      title: 'Hello World!'
    },
    scale: {
      width: 600,
      height: 400
    }
  }


  Retool.setContext({
    subscribe: fn => fn(model)
  })

  Retool.onCreate((model) => {
    console.log(model)
    instance = Chart.Pie(model)
    instance.resize(model.scale.width, model.scale.height)
    instance.update()
  });
  Retool.onUpdate(model => {
    instance.update();
  });
  Retool.listen();

</script> -->

<script type='module'>
  import Intreface from './main.js'
  const { Retool, Chart } = Intreface;
  let instance

  const model = {
    data: [
      { "Person": "Damian", "Jan": "5000", "Feb": "4678", "Mar": "8900", "Apl": "5810", "May": "12000", "Jun": "10987" },
      { "Person": "Tim", "Jan": "3400", "Feb": "100000", "Mar": "5400", "Apl": "4578", "May": "5000", "Jun": "12000" },
      { "Person": "James", "Jan": "2800", "Feb": "7000", "Mar": "12000", "Apl": "4700", "May": "1501", "Jun": "12500" }
    ],
    label: 'Person', // to be populated by retool input
    value: 'Mar', // to be populated by retool input
  }

  /*
    {
      data: {{Source.data}},
      label: {{Label.value}},
      value: {{Value.value}},
    }
  */


  Retool.setContext({
    subscribe: fn => {
      fn(model)
    }
  })

  Retool.onCreate((model) => {
    instance = Chart.Pie(model)
  });
  Retool.listen();
  Retool.onUpdate(model => {
    instance.update();
  });

</script>

</html>